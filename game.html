<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bobby’s B‑2 Bomber Game</title>

<style>
  /* ===== Base ===== */
  html, body {
    margin: 0;
    padding: 0;
    background: #f6f5f2;
    color: #222;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
      Roboto, Helvetica, Arial, sans-serif;
  }

  /* ===== Top Nav ===== */
  .top-nav {
    display: flex;
    justify-content: center;
    gap: 14px;
    padding: 14px;
    background: #f6f5f2;
  }

  .top-nav a {
    text-decoration: none;
    padding: 8px 16px;
    border-radius: 999px;
    background: #ffffff;
    border: 1px solid #ddd;
    color: #222;
    font-size: 14px;
    font-weight: 500;
    transition: background 0.2s ease, box-shadow 0.2s ease;
  }

  .top-nav a:hover {
    background: #f0f0f0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  }

  /* ===== Game Layout ===== */
  #wrap {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px 0 40px;
  }

  #game {
    border: 2px solid #222;
    background: #111;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
    max-width: 100%;
    height: auto;
  }

  /* ===== HUD ===== */
  #hud {
    position: fixed;
    top: 70px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    padding: 6px 12px;
    border-radius: 999px;
    background: rgba(0,0,0,.6);
    border: 1px solid rgba(255,255,255,.15);
    backdrop-filter: blur(6px);
    color: #eee;
    font-size: 13px;
    z-index: 10;
  }

  .badge {
    padding: 2px 8px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.2);
    font-weight: 600;
  }

  .ok   { background:#223b2b }
  .warn { background:#4b3a1a }
  .dead { background:#4b1a1a }

  #overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,.55);
    font-size: 22px;
    color: #fff;
    z-index: 20;
  }

  #msg {
    position: fixed;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    opacity: .75;
    color: #333;
  }
</style>
</head>

<body>

<!-- ===== Navigation ===== -->
<div class="top-nav">
  <a href="/">Home</a>
  <a href="/about.html">About</a>
</div>

<!-- ===== Game ===== -->
<div id="wrap">
  <canvas id="game" width="900" height="600"></canvas>
</div>

<div id="hud">
  <span>Reactors: <span id="hits" class="badge">0</span></span>
  <span>Passed: <span id="passed" class="badge">0</span></span>
  <span>Shots: <span id="shots" class="badge">0</span></span>
  <span>Best: <span id="best" class="badge">0</span></span>
  <span>ACE: <span id="ace" class="badge">0</span></span>
  <span id="state" class="badge ok">PLAYING</span>
</div>

<div id="overlay">Click or press any key to start</div>
<div id="msg">Arrows = move • Space = fire • R = restart • P = pause</div>

<script>
/* ===========================
   GAME SCRIPT (UNCHANGED)
   =========================== */
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  const planeY = H * 0.22;

  const ACE_LIMIT = 100;
  const ACE_WEIGHTS = { shot:1, passed:1, destroyed:-2 };
  const BASE_SCROLL = 2.2;
  const FIRE_COOLDOWN_MS = 150;
  const SIGHT_SPEED = 6;
  const REACTOR_CHANCE = 0.5;
  const SPAWN_MIN = 24, SPAWN_MAX = 46;

  function difficulty(t, hits){ return 1 + t*0.02 + hits*0.02; }

  let t=0, started=false, paused=false, gameOver=false;
  let objects=[], flashes=[], floaters=[], keys={};
  let shots=0, hits=0, passed=0, ace=0;
  let bestHits = parseInt(localStorage.getItem('ace_best_hits_v1')||'0',10);
  let lastFire=0, spawnTimer=0, nextSpawn=40;

  const hud = {
    shots:shots=document.getElementById('shots'),
    hits:document.getElementById('hits'),
    passed:document.getElementById('passed'),
    ace:document.getElementById('ace'),
    best:document.getElementById('best'),
    state:document.getElementById('state'),
    overlay:document.getElementById('overlay')
  };
  hud.best.textContent = bestHits;

  const sight = { x: W/2, y: H*0.56 };

  window.addEventListener('keydown', e=>{
    if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' ','p','P','r','R'].includes(e.key)) e.preventDefault();
    if (!started){ started=true; hud.overlay.style.display='none'; }
    keys[e.key]=true;
    if (e.key===' ') fire();
    if (e.key==='p'||e.key==='P') paused=!paused;
    if (e.key==='r'||e.key==='R') reset();
  });
  window.addEventListener('keyup', e=>keys[e.key]=false);
  window.addEventListener('mousedown', ()=>{ if(!started){ started=true; hud.overlay.style.display='none'; } });

  function fire(){
    if (paused||gameOver||!started) return;
    const now=performance.now();
    if(now-lastFire<FIRE_COOLDOWN_MS) return;
    lastFire=now; shots++;
  }

  function reset(){
    t=0; objects=[]; flashes=[]; floaters=[];
    shots=0; hits=0; passed=0; ace=0;
    paused=false; gameOver=false; started=false;
    hud.overlay.style.display='flex';
  }

  function loop(){
    requestAnimationFrame(loop);
    if(paused||!started) return;
    ctx.fillStyle='#d7c28f';
    ctx.fillRect(0,0,W,H);
  }
  loop();
})();
</script>

</body>
</html>
