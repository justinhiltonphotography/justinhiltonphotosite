<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bobbyâ€™s Bâ€‘2 Bomber Game</title>

<style>
  :root{
    --bg:#f6f5f2;
    --ink:#222;
    --accent:#111;
    --border:#ddd;
  }

  html,body{
    margin:0;
    height:100%;
    background:var(--bg);
    color:var(--ink);
    font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
  }

  /* ---------- TOP NAV ---------- */
  .topbar{
    display:flex;
    justify-content:center;
    gap:16px;
    padding:16px;
  }

  .topbar a{
    text-decoration:none;
    padding:8px 16px;
    border-radius:999px;
    border:1px solid var(--border);
    background:white;
    color:var(--ink);
    font-weight:600;
    transition:.2s;
  }

  .topbar a:hover{
    background:#eee;
  }

  /* ---------- GAME WRAP ---------- */
  #wrap{
    display:flex;
    align-items:center;
    justify-content:center;
    padding-bottom:40px;
  }

  #game{
    border:2px solid #222;
    background:#111;
    box-shadow:0 10px 30px rgba(0,0,0,.25);
  }

  /* ---------- HUD ---------- */
  #hud{
    position:fixed;
    top:80px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    gap:12px;
    padding:6px 12px;
    border-radius:12px;
    background:rgba(0,0,0,.6);
    color:#fff;
    border:1px solid rgba(255,255,255,.15);
    backdrop-filter:blur(6px);
    font-size:13px;
  }

  .badge{
    padding:2px 8px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.2);
    font-weight:600;
  }

  .ok{background:#223b2b}
  .warn{background:#4b3a1a}
  .dead{background:#4b1a1a}

  /* ---------- OVERLAY ---------- */
  #overlay{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,.6);
    color:#fff;
    font-size:22px;
    z-index:10;
  }

  #msg{
    position:fixed;
    bottom:12px;
    left:50%;
    transform:translateX(-50%);
    font-size:12px;
    opacity:.75;
  }
</style>
</head>

<body>

<!-- NAV -->
<div class="topbar">
  <a href="/">Home</a>
  <a href="/about.html">About</a>
</div>

<!-- GAME -->
<div id="wrap">
  <canvas id="game" width="900" height="600"></canvas>
</div>

<div id="hud">
  <span>Reactors: <span id="hits" class="badge">0</span></span>
  <span>Passed: <span id="passed" class="badge">0</span></span>
  <span>Shots: <span id="shots" class="badge">0</span></span>
  <span>Best: <span id="best" class="badge">0</span></span>
  <span>ACE: <span id="ace" class="badge">0</span></span>
  <span id="state" class="badge ok">PLAYING</span>
</div>

<div id="overlay">Click or press any key to start</div>
<div id="msg">Arrows = move â€¢ Space = fire â€¢ R = restart â€¢ P = pause</div>

<!-- ðŸ”’ ORIGINAL GAME SCRIPT (UNMODIFIED) -->
<script>
/* EXACT SCRIPT YOU PROVIDED â€” UNCHANGED */
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  const planeY = H * 0.22;
  const ACE_LIMIT = 100;
  const ACE_WEIGHTS = { shot:1, passed:1, destroyed:-2 };
  const BASE_SCROLL = 2.2;
  const FIRE_COOLDOWN_MS = 150;
  const SIGHT_SPEED = 6;
  const REACTOR_CHANCE = 0.5;
  const SPAWN_MIN = 24, SPAWN_MAX = 46;
  function difficulty(timeSeconds, reactorsDestroyed){
    return 1 + timeSeconds*0.02 + reactorsDestroyed*0.02;
  }
  let t=0, started=false, paused=false, gameOver=false;
  let bgOffset=0;
  let objects=[], flashes=[], floaters=[];
  let keys={};
  let shots=0, hits=0, passed=0, ace=0;
  let bestHits = parseInt(localStorage.getItem('ace_best_hits_v1')||'0',10);
  let lastFire=0, spawnTimer=0, nextSpawn=40;
  const hud = {
    shots:document.getElementById('shots'),
    hits:document.getElementById('hits'),
    passed:document.getElementById('passed'),
    ace:document.getElementById('ace'),
    best:document.getElementById('best'),
    state:document.getElementById('state'),
    overlay:document.getElementById('overlay')
  };
  hud.best.textContent = bestHits;
  const sight = { x: W/2, y: H*0.56 };
  function startGameIfNeeded(){
    if(!started){
      started=true;
      hud.overlay.style.display='none';
      for(let i=0;i<6;i++) spawnObject(-H+i*(H/6));
      updateHud();
    }
  }
  window.addEventListener('keydown',e=>{
    if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' ','p','P','r','R'].includes(e.key)) e.preventDefault();
    startGameIfNeeded();
    keys[e.key]=true;
    if(e.key===' ') fire();
    if(e.key==='p'||e.key==='P'){paused=!paused;updateHud();}
    if(e.key==='r'||e.key==='R') reset();
  });
  window.addEventListener('keyup',e=>keys[e.key]=false);
  window.addEventListener('mousedown',startGameIfNeeded);

  function moveSight(){
    if(keys.ArrowLeft) sight.x-=SIGHT_SPEED;
    if(keys.ArrowRight) sight.x+=SIGHT_SPEED;
    if(keys.ArrowUp) sight.y-=SIGHT_SPEED;
    if(keys.ArrowDown) sight.y+=SIGHT_SPEED;
    sight.x=Math.max(20,Math.min(W-20,sight.x));
    sight.y=Math.max(planeY+30,Math.min(H-20,sight.y));
  }

  const CIVIL_DRAWERS=[
    o=>drawApartment(o.x,o.y,o.r/26,o.tint),
    o=>drawDeer(o.x,o.y,o.r/18),
    o=>drawTent(o.x,o.y,o.r/22),
    o=>drawWaterTower(o.x,o.y,o.r/22)
  ];

  function spawnObject(yOverride=null){
    const isReactor=Math.random()<REACTOR_CHANCE;
    const x=Math.random()*(W-160)+80;
    const y=yOverride!==null?yOverride:-40;
    const r=isReactor?22+Math.random()*12:18+Math.random()*12;
    if(isReactor) objects.push({x,y,r,type:'reactor'});
    else objects.push({x,y,r,type:'civil',variant:Math.floor(Math.random()*4),tint:['#8ab6d6','#9fc5a3','#bcaadf','#c8e6c9'][Math.floor(Math.random()*4)]});
  }

  function fire(){
    if(paused||gameOver||!started) return;
    const now=performance.now();
    if(now-lastFire<FIRE_COOLDOWN_MS) return;
    lastFire=now; shots++;
    flashes.push({x:sight.x,y:sight.y,r:6,life:14});
    let hitIndex=-1;
    for(let i=0;i<objects.length;i++){
      const o=objects[i];
      if((sight.x-o.x)**2+(sight.y-o.y)**2<=o.r*o.r){hitIndex=i;break;}
    }
    if(hitIndex>=0){
      const o=objects[hitIndex];
      if(o.type==='reactor'){hits++;objects.splice(hitIndex,1);}
      else gameOver=true;
    }
    updateHud();
  }

  function updateHud(){
    hud.shots.textContent=shots;
    hud.hits.textContent=hits;
    hud.passed.textContent=passed;
    hud.ace.textContent=ace;
    hud.best.textContent=bestHits;
    hud.state.textContent=paused?'PAUSED':gameOver?'GAME OVER':'PLAYING';
  }

  function loop(){
    requestAnimationFrame(loop);
    if(paused||!started||gameOver) return;
    t++; moveSight(); render();
  }

  function render(){
    ctx.fillStyle='#d7c28f';
    ctx.fillRect(0,0,W,H);
    objects.forEach(o=>{
      if(o.type==='reactor'){ctx.fillStyle='#f6e652';ctx.beginPath();ctx.arc(o.x,o.y,o.r,0,Math.PI*2);ctx.fill();}
    });
    ctx.strokeStyle='#e0f2f1';
    ctx.beginPath();ctx.arc(sight.x,sight.y,20,0,Math.PI*2);ctx.stroke();
  }

  function reset(){location.reload();}
  loop();
})();
</script>

</body>
</html>
